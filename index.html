<div class='generator-container'>
    <h2>Generador de Reproductor para Blogger</h2>
    
    <div class='form-group'>
        <label>URL del Video MP4:</label>
        <input type='text' id='bloggerVideoUrl' placeholder='Ej: https://tuservidor.com/video.mp4' style='width: 100%'/>
    </div>
    
    <div class='form-group'>
        <label>VAST Tag (opcional):</label>
        <input type='text' id='bloggerVastUrl' placeholder='Ej: https://tuanuncio.com/vast.xml' style='width: 100%'/>
    </div>
    
    <button onclick='generateBloggerCode()'>Generar Código</button>
    
    <div id='bloggerOutput' style='margin-top: 20px; display: none;'>
        <h3>Código para pegar en Blogger:</h3>
        <textarea id='bloggerEmbedCode' style='width: 100%; height: 100px;'></textarea>
    </div>
</div>

<div id='videoPlayer' style='display: none; margin: 20px 0;'>
    <video id='fluidPlayerBlogger'>
        <source src='' type='video/mp4'/>
    </video>
</div>

<link href='https://cdn.fluidplayer.com/v3/current/fluidplayer.min.css' rel='stylesheet'/>
<script src='https://cdn.fluidplayer.com/v3/current/fluidplayer.min.js'></script>

<script>
// Función para generar el código
function generateBloggerCode() {
    const videoUrl = encodeURIComponent(document.getElementById('bloggerVideoUrl').value);
    const vastUrl = encodeURIComponent(document.getElementById('bloggerVastUrl').value || 'default_vast_url');
    
    const embedCode = `<iframe src="${window.location.href}?video=${videoUrl}&vast=${vastUrl}" width="640" height="360" frameborder="0" allowfullscreen></iframe>`;
    
    document.getElementById('bloggerEmbedCode').value = embedCode;
    document.getElementById('bloggerOutput').style.display = 'block';
}

// Función para cargar el reproductor
function loadPlayer() {
    const urlParams = new URLSearchParams(window.location.search);
    
    if(urlParams.has('video')) {
        document.querySelector('.generator-container').style.display = 'none';
        document.getElementById('videoPlayer').style.display = 'block';
        
        fluidPlayer('fluidPlayerBlogger', {
            layoutControls: {
                primaryColor: '#ff5722',
                posterImage: ''
            },
            vastOptions: {
                adList: [{
                    roll: 'preRoll',
                    vastTag: urlParams.get('vast'),
                    adText: 'Anuncio | Saltar en {remaining} segundos',
                    skipButtonCaption: 'Saltar en [seconds]'
                }]
            }
        });
        
        const player = document.getElementById('fluidPlayerBlogger');
        player.src = decodeURIComponent(urlParams.get('video'));
    }
}

// Inicialización automática
window.onload = function() {
    loadPlayer();
};
</script>

<style>
.generator-container {
    max-width: 700px;
    margin: 20px auto;
    padding: 20px;
    background: #f8f9fa;
    border: 1px solid #ddd;
    border-radius: 8px;
}

.form-group {
    margin-bottom: 15px;
}

button {
    background: #4285f4;
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 4px;
    cursor: pointer;
}

button:hover {
    background: #357abd;
}
</style>
