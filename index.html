<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generador de Iframe</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <h1>Generador de Iframe para Fluid Player</h1>
    <form id="iframe-generator">
        <label for="service">Servicio:</label>
        <select id="service">
            <option value="direct">Directo (URL completa)</option>
            <option value="pixeldrain">Pixeldrain (ID del archivo)</option>
            <option value="googledrive">Google Drive (ID del archivo)</option>
        </select>

        <label for="video-id">ID/URL del Video:</label>
        <input type="text" id="video-id" placeholder="Ejemplo: tmMzuTHm (Pixeldrain) o 1X2Y3Z4A5B6C7D8E9F0G (Google Drive)" required>

        <label for="poster-url">URL de la Imagen de Portada:</label>
        <input type="text" id="poster-url" placeholder="https://example.com/poster.jpg">

        <button type="button" onclick="generateIframe()">Generar Iframe</button>
    </form>

    <div class="iframe-preview" id="iframe-preview"></div>

    <script>
        function isValidUrl(url) {
            try {
                new URL(url);
                return true;
            } catch (e) {
                return false;
            }
        }

        function generateIframe() {
            const service = document.getElementById('service').value;
            const videoId = document.getElementById('video-id').value.trim();
            const posterUrl = document.getElementById('poster-url').value.trim();

            let videoUrl;

            // Generar URL según el servicio seleccionado
            if (service === "direct") {
                videoUrl = videoId; // URL completa directa
            } else if (service === "pixeldrain") {
                videoUrl = `https://pixeldrain.com/api/file/${videoId}`;
            } else if (service === "googledrive") {
                videoUrl = `https://drive.google.com/uc?id=${videoId}&export=download`;
            }

            // Validar campos obligatorios
            if (!videoId) {
                alert("Por favor, ingresa el ID o URL del video.");
                return;
            }

            // Validar formato de URLs
            if ((service === "direct" && !isValidUrl(videoUrl)) || (posterUrl && !isValidUrl(posterUrl))) {
                alert("Por favor, ingresa URLs válidas.");
                return;
            }

            // Generar URL del iframe
            const iframeSrc = `https://jeison-ramos.github.io/player/player.html?video=${encodeURIComponent(videoUrl)}&poster=${encodeURIComponent(posterUrl)}`;

            // Mostrar el iframe generado
            const iframePreview = document.getElementById('iframe-preview');
            iframePreview.innerHTML = `
                <h2>Iframe Generado:</h2>
                <textarea rows="4" style="width: 100%;">${`<iframe src="${iframeSrc}" width="800" height="450" frameborder="0" allowfullscreen></iframe>`}</textarea>
                <h3>Vista Previa:</h3>
                <iframe src="${iframeSrc}" width="800" height="450" frameborder="0" allowfullscreen></iframe>
            `;
        }
    </script>
</body>
</html>
